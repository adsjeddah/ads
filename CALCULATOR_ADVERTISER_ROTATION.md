# نظام توزيع العملاء على المعلنين في حاسبة التكلفة

## كيف يعمل النظام:

### 1. آلية التوزيع (Round-Robin)
- يتم جلب قائمة جميع المعلنين النشطين من قاعدة البيانات
- يتم توزيع العملاء بالتساوي على المعلنين بالترتيب
- كل عميل جديد يتم توجيهه للمعلن التالي في القائمة
- بعد الوصول لآخر معلن، يبدأ من الأول مرة أخرى

### 2. تخزين حالة التوزيع
- يتم استخدام localStorage لحفظ رقم آخر معلن تم التوجيه إليه
- المفتاح المستخدم: `lastAdvertiserIndex`
- هذا يضمن استمرارية التوزيع حتى بعد إغلاق المتصفح

### 3. البيانات المرسلة للمعلن
عند إرسال العميل للمعلن، يتم إرسال رسالة WhatsApp تحتوي على:
- بيانات العميل (الاسم والهاتف)
- تفاصيل النقل (من وإلى والتاريخ)
- السعر التقديري
- تفاصيل المحتويات (عدد الغرف)
- معلومات الطوابق
- الخدمات الإضافية المطلوبة

### 4. مثال على التوزيع:
إذا كان لدينا 3 معلنين: (شركة A، شركة B، شركة C)
- العميل 1 ← شركة A
- العميل 2 ← شركة B
- العميل 3 ← شركة C
- العميل 4 ← شركة A (يبدأ من جديد)
- وهكذا...

## مميزات النظام:

### عدالة التوزيع
- جميع المعلنين يحصلون على نفس عدد العملاء المحتملين
- لا يوجد تفضيل لمعلن على آخر

### شفافية للعميل
- العميل يعرف اسم الشركة التي تم توجيهه إليها
- رسالة تأكيد واضحة بعد الإرسال

### معلومات مفصلة للمعلن
- المعلن يحصل على جميع التفاصيل اللازمة
- يمكنه تقديم عرض سعر دقيق بناءً على المعلومات

## إعدادات يمكن تخصيصها:

### 1. تصفية المعلنين
يمكن إضافة معايير إضافية لتصفية المعلنين مثل:
- المنطقة الجغرافية
- نوع الخدمات المقدمة
- التقييمات

### 2. أولوية التوزيع
يمكن تطوير النظام لإعطاء أولوية بناءً على:
- خطة الاشتراك (ذهبي، فضي، برونزي)
- سرعة الاستجابة
- معدل التحويل

### 3. تتبع وإحصائيات
يمكن إضافة نظام لتتبع:
- عدد العملاء المرسلين لكل معلن
- معدل التحويل لكل معلن
- متوسط قيمة الصفقات